<script setup>
import { useRoute, useRouter } from 'vue-router'
import { ref } from 'vue'

// 1. –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL
const route = useRoute()
const router = useRouter()

const questions = [
  {
    text: '–ö–∞–∫–æ–π HTML-—Ç–µ–≥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è?',
    answers: ['<imgsrc>', '<image>', '<img>', '<picture>']
  },
  {
    text: '–ö–∞–∫ –∑–∞–¥–∞—Ç—å —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ CSS?',
    answers: ['text-color:  cyan;', 'color: magenta;', 'font-color: yellow;', 'text-style: black;']
  },
  {
    text: '–ß—Ç–æ –≤–µ—Ä–Ω–µ—Ç typeof null –≤ LavaScript?',
    answers: ['null', 'undefined', 'boolean', 'object']
  },
  {
    text: '–ö–∞–∫–æ–π –ø—Å–µ–≤–¥–æ–∫–ª–∞—Å—Å –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å—Ç–∏–ª–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∫—É—Ä—Å–æ—Ä–∞?',
    answers: [':hover', ':active', ':focus', ':visited']
  },
  {
    text: '–í —á—ë–º –æ—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –º–µ–∂–¥—É reactive() –∏ ref() –≤–æ Vue 3?',
    answers: [
      'reactive() ‚Äî –¥–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤, ref() ‚Äî –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤',
      'reactive() ‚Äî –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤, ref() ‚Äî –¥–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ –∏–ª–∏ –ª—é–±—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π',
      'ref() —Å–æ–∑–¥–∞—ë—Ç computed-—Å–≤–æ–π—Å—Ç–≤–∞',
      '–û–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ'
    ]
  },
  {
    text: '–ö–∞–∫ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –¥–æ—á–µ—Ä–Ω–∏–π –≤–æ Vue?',
    answers: ['–ò—Å–ø–æ–ª—å–∑—É—è v-export', '–ß–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ emit', '–° –ø–æ–º–æ—â—å—é —Å–≤–æ–π—Å—Ç–≤–∞ props', '–ß–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é']
  },
  {
    text: '–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ v-bind?',
    answers: [
      '–ó–∞–ø—É—Å–∫–∞–µ—Ç –º–µ—Ç–æ–¥',
      '–°–æ–∑–¥–∞—ë—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç',
      '–î–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç–∏–ª–∏ –∫ —ç–ª–µ–º–µ–Ω—Ç—É',
      '–ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫ –∞—Ç—Ä–∏–±—É—Ç—É'
    ]
  },
  {
    text: '–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è provide/inject –≤ Vue?',
    answers: [
      '–ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏, –º–∏–Ω—É—è props –∏ emit',
      '–£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞',
      '–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã',
      '–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞'
    ]
  },
  {
    text: '–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ö—É–∫ onUnmounted?',
    answers: [
      '–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã',
      '–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞',
      '–ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ DOM',
      '–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ props'
    ]
  }
]

// 2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ ref-–º–∞—Å—Å–∏–≤—ã
const userAnswers = ref([])
const correctAnswers = ref([])

try {
  userAnswers.value = JSON.parse(route.query.userAnswers)
} catch {
  userAnswers.value = []
}
try {
  correctAnswers.value = JSON.parse(route.query.correctAnswers)
} catch {
  correctAnswers.value = []
}
</script>

<template>
  <div class="answers-container">
    <div class="container">
      <h1>–í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã:</h1>

      <div
        v-for="(question, index) in questions"
        :key="index"
        class="answer-block"
      >
        <h3>–í–æ–ø—Ä–æ—Å {{ index + 1 }}: {{ question.text }}</h3>

        <p v-if="correctAnswers.value[index] !== undefined">
          ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:
          <strong>{{ question.answers[correctAnswers.value[index]] }}</strong>
        </p>

        <p
          v-if="userAnswers.value[index] !== undefined"
          :class="{
            correct: userAnswers.value[index] === correctAnswers.value[index],
            incorrect: userAnswers.value[index] !== correctAnswers.value[index]
          }"
        >
          üü° –í–∞—à –æ—Ç–≤–µ—Ç:
          <strong>{{ question.answers[userAnswers.value[index]] }}</strong>
        </p>
      </div>

      <router-link to="/">
        <button>–ü—Ä–æ–π—Ç–∏ —Å–Ω–æ–≤–∞</button>
      </router-link>
    </div>
  </div>
</template>

<style scoped>
.answers-container {
  text-align: center;
  color: #fff;
}
.answer-block {
  margin: 20px auto;
  padding: 15px;
  border-bottom: 1px solid #4da0ff;
  max-width: 800px;
}
.correct {
  color: #00ff88;
}
.incorrect {
  color: #ff5555;
}
button {
  margin-top: 40px;
  font-size: 1.2rem;
  padding: 10px 30px;
  border-radius: 10px;
  background-color: #163a91;
  color: white;
  border: none;
  cursor: pointer;
}
button:hover {
  background-color: #081961;
}
</style>